// Generated by workflow-compiler-rs v{{version}}
// DO NOT EDIT - This file is auto-generated from workflow definition
// Generated: {{generated_at}}

{{#each imports}}
import { {{items}} } from '{{module}}';
{{/each}}

// Type definitions for activities
type LogLevel = 'debug' | 'info' | 'warn' | 'error';

interface LogInput {
  message: string;
  level?: LogLevel;
  metadata?: Record<string, unknown>;
}

interface LogOutput {
  logged: boolean;
  timestamp: Date;
}

{{#each activities}}
/**
 * {{function_name}} Activity
 * {{description}}
 */
export async function {{function_name}}(
  input: {{{input_type}}}
): Promise<{{{output_type}}}> {
{{#if is_log_activity}}
  // Kong logging integration - type-safe implementation
  const logInput = input as LogInput;
  const logPayload = {
    timestamp: new Date().toISOString(),
    level: logInput.level ?? 'info',
    message: logInput.message,
    metadata: logInput.metadata ?? {},
  };

  if (process.env.KONG_LOGGING_URL) {
    await fetch(process.env.KONG_LOGGING_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(logPayload),
    });
  } else {
    console.log(JSON.stringify(logPayload));
  }

  return { logged: true, timestamp: new Date() };
{{else}}
  {{{implementation}}}
{{/if}}
}

{{/each}}
