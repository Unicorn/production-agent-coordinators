// Generated by workflow-compiler-rs v{{version}}
// DO NOT EDIT - This file is auto-generated from workflow definition
// Generated: {{generated_at}}

import { Worker, NativeConnection } from '@temporalio/worker';
import * as activities from './activities';

async function run(): Promise<void> {
  // Connect to Temporal server
  const connection = await NativeConnection.connect({
    address: process.env.TEMPORAL_ADDRESS ?? 'localhost:7233',
  });

  // Create and start the worker
  const worker = await Worker.create({
    connection,
    namespace: process.env.TEMPORAL_NAMESPACE ?? 'default',
    workflowsPath: require.resolve('./workflows'),
    activities,
    taskQueue: '{{task_queue}}',
  });

  console.log('Worker started for task queue: {{task_queue}}');

  // Start accepting tasks
  await worker.run();
}

run().catch((err) => {
  console.error('Worker failed:', err);
  process.exit(1);
});
